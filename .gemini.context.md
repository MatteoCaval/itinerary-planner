# Itinerary Planner - Project Context

## Project Overview
A client-side web application for creating and visualizing travel itineraries. It features a split-screen layout with a manageable list of stops on the left and a live-updating map on the right.

## Tech Stack
- **Framework:** React 18 (TypeScript)
- **Build Tool:** Vite
- **Styling:** Bootstrap 5 (React-Bootstrap)
- **Icons:** Lucide React
- **Map Library:** Leaflet + React Leaflet (OpenStreetMap)
- **Drag & Drop:** @dnd-kit (Core + Sortable)
- **Environment:** Docker & Docker Compose

## Architecture & Core Logic
- **State Management:** React `useState` and `useEffect` are used for the main itinerary state.
- **Persistence:** Data is automatically saved to `localStorage` under the key `itinerary-locations`.
- **Geocoding:** 
    - Search uses the **Nominatim OpenStreetMap API** for forward geocoding.
    - Map clicks use the **Nominatim Reverse Geocoding API** to fetch location names automatically.
- **Dnd Kit:** Implements vertical sorting for the itinerary list. Reordering the list immediately updates the `locations` state, which in turn updates the map route.
- **Map Routing:** A `Polyline` component in `MapDisplay.tsx` connects markers in the order they appear in the itinerary list.

## Folder Structure
```text
itinerary-planner/
├── src/
│   ├── components/
│   │   ├── MapDisplay.tsx   # Leaflet map logic, markers, and polylines
│   │   └── SortableItem.tsx # Individual itinerary stop with drag-and-drop & edit logic
│   ├── App.tsx              # Main layout, state management, search, and DnD context
│   ├── types.ts             # Shared TypeScript interfaces (e.g., Location)
│   ├── main.tsx             # Entry point
│   └── index.css            # Global styles and layout overrides
├── Dockerfile               # Node 18-alpine based image
├── docker-compose.yaml      # Development service with volume mounting
├── package.json             # Dependencies and scripts
└── vite.config.ts           # Vite configuration with Docker support (polling/host)
```

## Getting Started
To run the app without installing local dependencies:
```bash
docker-compose up --build
```
The app will be available at **http://localhost:5173**.

## Usage Tips
- **Click to Add:** Click anywhere on the map to add a point with an automatically resolved name.
- **Search:** Use the sidebar search to find specific places.
- **Edit Names:** Click on the name of a location in the sidebar list to edit it.
- **Reorder:** Drag the handle (grip icon) to change the sequence of your trip.
- **Live Route:** The dashed blue line on the map always follows the order of the list.
